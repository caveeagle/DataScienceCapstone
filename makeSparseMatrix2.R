
library(doSNOW)

library('Matrix')

#################################################
#################################################

setwd("D:\\!Data Science\\Capstone\\objects")

#################################################
#################################################

RES <- readRDS( file = "sparse_matrix_RAW.rds" )

N <- nrow(RES)


sparse <- Matrix(0, nrow = 366715, ncol = 61184, sparse = TRUE)

pb <- txtProgressBar(min = 1, max = 10000, style = 3)

for(i in 1:10000)
{
  setTxtProgressBar(pb, i)
  sparse[ RES[i,1], RES[i,2] ] <- RES[i,3]
}


#################################################
#################################################

# object.size(sparse)
# head(sparse)

###############################################################################
###############################################################################

file_sparse_rds = "D:\\!Data Science\\Capstone\\objects\\sparse_matrix_object.rds"

saveRDS(sparse, file = file_sparse_rds )

###############################################################################
###############################################################################








